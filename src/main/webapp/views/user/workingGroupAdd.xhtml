<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">
        #{interfaceLabel.add} #{interfaceLabel.workingGroup} 
	</ui:define>


	<ui:define name="implementation">

		<h:form id="form">

			<div class="card crud-demo">
				<p:growl id="messages" showDetail="true" />
				<p:panelGrid columns="6"
					columnClasses="ui-grid-col-1,ui-grid-col-3,ui-grid-col-1,ui-grid-col-3,ui-grid-col-1,ui-grid-col-3"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">
					<h:outputText value="#{interfaceLabel.arabicName}" />
					<p:inputText value="#{workingGroupBean.workingGroup.arabicName}"></p:inputText>

					<h:outputText value="#{interfaceLabel.englishName}" />
					<p:inputText value="#{workingGroupBean.workingGroup.englishName}"></p:inputText>

					<h:outputText value="#{interfaceLabel.code}" />
					<p:inputText value="#{workingGroupBean.workingGroup.code}"></p:inputText>

				</p:panelGrid>

				<p:divider align="center" type="dashed">
				</p:divider>

				<p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">
					<p:fieldset legend="#{interfaceLabel.usersAvailableGroup}">
						<p:dataTable id="userAliasSource_datatable" var="userAliasVar"
							value="#{workingGroupBean.userAliasSource}"
							emptyMessage="#{interfaceLabel.noRecordsFound}"
							paginatorPosition="bottom" rows="8" paginator="true">

							<p:column style="width:20px">
								<p:commandButton styleClass="ui-button-success"
									icon="pi pi-plus" ajax="true"
									action="#{workingGroupBean.AddUserAlias(userAliasVar)}"
									update="@([id$=userAliasTarget_datatable],[id$=userAliasSource_datatable])">
								</p:commandButton>
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.userName}" />
								</f:facet>
								<h:outputText value="#{userAliasVar.sysUser.firstName} #{userAliasVar.sysUser.lastName}" />
							</p:column>

							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.jobPositionTitle}" />
								</f:facet>
								<h:outputText value="#{userAliasVar.jobPosition.name}" />
							</p:column>

							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.organization}" />
								</f:facet>
								<h:outputText value="#{userAliasVar.organization.name}" />
							</p:column>
						</p:dataTable>
					</p:fieldset>
					<p:fieldset legend="#{interfaceLabel.usersSelectedGroup}">
						<p:outputPanel id="dropArea">
							<p:dataTable id="userAliasTarget_datatable" var="userAliasVar"
								value="#{workingGroupBean.userAliasTarget}"
								emptyMessage="#{interfaceLabel.noRecordsFound}"
								paginatorPosition="bottom" rows="8" paginator="true">
								<p:column>
									<f:facet name="header">
										<h:outputText value="#{interfaceLabel.userName}" />
									</f:facet>
									<h:outputText value="#{userAliasVar.sysUser.firstName} #{userAliasVar.sysUser.lastName}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="#{interfaceLabel.jobPositionTitle}" />
									</f:facet>
									<h:outputText value="#{userAliasVar.jobPosition.name}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="#{interfaceLabel.organization}" />
									</f:facet>
									<h:outputText value="#{userAliasVar.organization.name}" />
								</p:column>
								<p:column style="width:20px">
									<f:facet name="header">
										<h:outputText value="#{interfaceLabel.delete}" />
									</f:facet>
									<p:commandButton styleClass="ui-button-danger"
										icon="pi pi-trash" ajax="true"
										action="#{workingGroupBean.removeUserAlias(userAliasVar)}"
										update="@([id$=userAliasTarget_datatable],[id$=userAliasSource_datatable])">
									</p:commandButton>
								</p:column>
							</p:dataTable>
						</p:outputPanel>
					</p:fieldset>

				</p:panelGrid>
				<p:commandButton value="#{interfaceLabel.save}" icon="pi pi-check"
					action="#{workingGroupBean.save()}" ajax="true"
					update=":form:messages" />

				<p:commandButton value="#{interfaceLabel.back}"
					styleClass="ui-button-success" action="pretty:workingGroupView"
					icon="pi pi-undo" />
			</div>

		</h:form>
	</ui:define>
</ui:composition>