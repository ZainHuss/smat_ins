<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="section-head">
        #{interfaceLabel.roleUpdate} 
	</ui:define>


	<ui:define name="section-content">
		<h:form id="form_updateSysRole">
			<div class="card crud-demo">
				<p:growl id="messages" showDetail="true" life="2000" sticky="false" />
				<p:panelGrid columns="3"
					columnClasses="ui-grid-col-2,ui-grid-col-7,ui-grid-col-3"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">
					<h:outputText value="#{interfaceLabel.name}" />
					<p:inputText value="#{sysRoleBean.sysRole.name}"></p:inputText>
					<p:column></p:column>

					<h:outputText value="#{interfaceLabel.code}" />
					<p:inputText value="#{sysRoleBean.sysRole.code}"></p:inputText>
					<p:column></p:column>

					<h:outputText value="#{interfaceLabel.description}" />
					<p:inputTextarea rows="4"
						value="#{sysRoleBean.sysRole.description}"></p:inputTextarea>
					<p:column></p:column>
					<p:commandButton value="#{interfaceLabel.update}"
						icon="pi pi-check" styleClass="ui-button-success"
						action="#{sysRoleBean.update()}" ajax="true"
						update=":form_updateSysRole:messages" />
					<p:column></p:column>
					<p:column></p:column>
				</p:panelGrid>





				<p:panelGrid columns="2" columnClasses="ui-grid-col-9,ui-grid-col-3"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">
					<p:fieldset id="availableArticlesField"
						legend="#{interfaceLabel.permissionsGrantedGroup}">

						<p:commandButton value="#{interfaceLabel.addPermission}"
							icon="pi pi-plus" styleClass="ui-button-success"
							action="#{sysRoleBean.getPermissionSourceList()}"
							update=":form_updateSysRole:permissions_datatable"
							oncomplete="PF('manageSysPermessionDialog').show()"
							process="@this" />

						<p:dataTable id="rolePermission_datatable" var="rolePermissionVar"
							value="#{sysRoleBean.rolePermissionList}"
							paginatorPosition="bottom" rows="8" paginator="true">
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.permission}" />
								</f:facet>
								<h:outputText value="#{rolePermissionVar.sysPermission.name}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.delete}" />
								</f:facet>
								<p:commandButton styleClass="ui-button-danger"
									icon="pi pi-trash" ajax="true"
									action="#{sysRoleBean.deletePermission(rolePermissionVar)}"
									update="@([id$=rolePermission_datatable],[id$=messages])">
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</p:fieldset>
					<p:column></p:column>
				</p:panelGrid>
				<p:panelGrid columns="3"
					columnClasses="ui-grid-col-2,ui-grid-col-7,ui-grid-col-3"
					layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
					style="border:0px none; background-color:transparent;">
					<p:commandButton value="#{interfaceLabel.back}"
						styleClass="ui-button-success" action="pretty:roles"
						icon="pi pi-undo" />
					<p:column></p:column>
					<p:column></p:column>

				</p:panelGrid>


				<p:dialog header="#{interfaceLabel.permissions}" showEffect="fade"
					modal="true" width="400" widgetVar="manageSysPermessionDialog"
					responsive="true">
					<p:outputPanel id="sysPermession-content" class="ui-fluid">
						<p:dataTable id="permissions_datatable" var="permissionVar"
							value="#{sysRoleBean.permissionsSource}"
							emptyMessage="#{interfaceLabel.noRecordsFound}"
							paginatorPosition="bottom" rows="8" paginator="true"
							selection="#{sysRoleBean.permissionsTarget}"
							rowKey="#{permissionVar.id}">
							<p:column headerText="#{interfaceLabel.check}"
								selectionMode="multiple" />
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{interfaceLabel.permission}" />
								</f:facet>
								<h:outputText value="#{permissionVar.name}" />
							</p:column>
						</p:dataTable>
					</p:outputPanel>
					<f:facet name="footer">
						<p:commandButton value="#{interfaceLabel.addPermission}"
							icon="pi pi-check" styleClass="ui-button-success"
							action="#{sysRoleBean.addPermission()}"
							update="@([id$=rolePermission_datatable],[id$=messages])"
							oncomplete="PF('manageSysPermessionDialog').hide()"
							class="ui-button-secondary" />
					</f:facet>
				</p:dialog>
			</div>
		</h:form>
	</ui:define>
</ui:composition>