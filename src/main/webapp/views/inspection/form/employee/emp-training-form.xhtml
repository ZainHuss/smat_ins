<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="head">
        <h:outputStylesheet library="#{appSetting.resourceLib}"
                            name="css/material-theme.css"></h:outputStylesheet>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
        <style>
            /* Golden Luxury Theme with Premium Glassmorphism */
            :root {
                --gold-50: #fffbf0;
                --gold-100: #fef7e0;
                --gold-200: #fef0c7;
                --gold-300: #fedf89;
                --gold-400: #fec84b;
                --gold-500: #fdb414;
                --gold-600: #dc9200;
                --gold-700: #b26d00;
                --gold-800: #925a00;
                --gold-900: #783f00;

                --primary-50: var(--gold-50);
                --primary-100: var(--gold-100);
                --primary-200: var(--gold-200);
                --primary-300: var(--gold-300);
                --primary-400: var(--gold-400);
                --primary-500: var(--gold-500);
                --primary-600: var(--gold-600);
                --primary-700: var(--gold-700);
                --primary-800: var(--gold-800);
                --primary-900: var(--gold-900);

                --primary-color: var(--gold-600);
                --primary-light: rgba(220, 146, 0, 0.15);
                --secondary-color: var(--gold-800);
                --accent-color: #c9a96e;
                --success-color: #a8c26a;
                --warning-color: #e6b450;
                --error-color: #d9776e;

                --text-primary: #2c2c2c;
                --text-secondary: #5a5a5a;
                --surface-color: rgba(255, 253, 248, 0.92);
                --surface-hover: rgba(255, 252, 242, 0.98);
                --border-color: rgba(220, 200, 167, 0.4);
                --required-color: #d9776e;

                --shadow-sm: 0 1px 3px rgba(120, 63, 0, 0.08);
                --shadow-md: 0 4px 12px rgba(120, 63, 0, 0.12);
                --shadow-lg: 0 10px 25px rgba(120, 63, 0, 0.15);
                --shadow-xl: 0 20px 40px rgba(120, 63, 0, 0.18);
                --glass-shadow: 0 8px 32px 0 rgba(120, 63, 0, 0.15);
                --glass-border: 1px solid rgba(255, 248, 225, 0.3);

                --gradient-primary: linear-gradient(135deg, var(--gold-500) 0%, var(--gold-700) 100%);
                --gradient-gold: linear-gradient(135deg, #fdb414 0%, #b26d00 100%);
                --gradient-premium: linear-gradient(135deg, #fdb414 0%, #dc9200 50%, #b26d00 100%);
                --gradient-accent: linear-gradient(135deg, #c9a96e 0%, #a88b5e 100%);
                --gradient-card: linear-gradient(135deg, rgba(255, 253, 248, 0.96) 0%, rgba(255, 252, 242, 0.98) 100%);
                --neon-glow: 0 0 15px rgba(253, 180, 20, 0.3);
                --golden-glow: 0 0 20px rgba(253, 180, 20, 0.4);

                --border-radius-sm: 8px;
                --border-radius-md: 12px;
                --border-radius-lg: 16px;
                --border-radius-xl: 20px;
                --border-radius-pill: 50px;

                --transition-base: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            }

            * {
                transition: var(--transition-base);
            }

            body {
                background-color: #fefaf0 !important;
                background-image:
                        radial-gradient(at 40% 20%, rgba(254, 244, 215, 0.7) 0px, transparent 50%),
                        radial-gradient(at 80% 0%, rgba(254, 247, 224, 0.5) 0px, transparent 50%),
                        radial-gradient(at 0% 50%, rgba(255, 251, 240, 0.6) 0px, transparent 50%),
                        radial-gradient(at 80% 50%, rgba(254, 240, 199, 0.4) 0px, transparent 50%),
                        radial-gradient(at 0% 100%, rgba(254, 223, 137, 0.3) 0px, transparent 50%),
                        radial-gradient(at 80% 100%, rgba(254, 200, 75, 0.2) 0px, transparent 50%),
                        radial-gradient(at 0% 0%, rgba(255, 255, 255, 0.9) 0px, transparent 50%);
                background-attachment: fixed;
                min-height: 100vh;
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                color: var(--text-primary);
                line-height: 1.6;
            }

            /* Premium Card Styling with Golden Accents */
            .card {
                background: var(--gradient-card);
                border-radius: var(--border-radius-lg);
                box-shadow: var(--shadow-lg), var(--glass-shadow);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: var(--glass-border);
                position: relative;
                overflow: hidden;
                margin-bottom: 2rem;
                transform: translateY(0);
                animation: cardSlideIn 0.6s ease-out;
                padding: 2rem;
                transition: var(--transition-slow);
                border-top: 1px solid rgba(255, 248, 225, 0.8);
            }

            .card:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--gradient-premium);
                z-index: 1;
            }

            .card + .card {
                margin-top: 2.5rem;
            }

            @keyframes cardSlideIn {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .card:hover {
                transform: translateY(-8px);
                box-shadow: var(--shadow-xl), var(--golden-glow), 0 8px 25px rgba(253, 180, 20, 0.25);
            }

            /* Form Title with Premium Golden Style */
            .form-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
                padding-bottom: 1.25rem;
                border-bottom: 1px solid rgba(220, 200, 167, 0.3);
                position: relative;
            }

            .form-header:after {
                content: "";
                position: absolute;
                bottom: -1px;
                left: 0;
                width: 100px;
                height: 2px;
                background: var(--gradient-gold);
                border-radius: 2px;
            }

            .form-title {
                font-size: 1.85rem;
                font-weight: 700;
                color: var(--gold-800);
                margin: 0;
                position: relative;
                display: inline-block;
                font-family: 'Playfair Display', serif;
                letter-spacing: -0.5px;
            }

            .form-title:after {
                content: "";
                position: absolute;
                bottom: -1.25rem;
                left: 0;
                width: 60px;
                height: 3px;
                background: var(--gradient-premium);
                border-radius: 3px;
                transition: width 0.4s ease;
            }

            .form-title:hover:after {
                width: 90px;
            }

            /* Form Grid Layout */
            .form-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 1.75rem;
                margin-bottom: 1.75rem;
            }

            .form-col-2 {
                grid-column: span 2;
            }

            /* Field Group Styling */
            .field-group {
                position: relative;
                margin-bottom: 1.5rem;
            }

            .field-group.required-field:before {
                content: "";
                position: absolute;
                left: -14px;
                top: 14px;
                width: 8px;
                height: 8px;
                background: var(--required-color);
                border-radius: 50%;
                box-shadow: 0 0 0 2px rgba(217, 119, 110, 0.4);
                animation: pulse 1.5s infinite;
                z-index: 2;
            }

            @keyframes pulse {
                0% {
                    opacity: 0.6;
                    box-shadow: 0 0 0 2px rgba(217, 119, 110, 0.4);
                }
                50% {
                    opacity: 1;
                    box-shadow: 0 0 0 4px rgba(217, 119, 110, 0.6);
                }
                100% {
                    opacity: 0.6;
                    box-shadow: 0 0 0 2px rgba(217, 119, 110, 0.4);
                }
            }

            /* Premium Input Fields Styling */
            .ui-inputtext, .ui-selectonemenu, .ui-calendar, .ui-inputtextarea {
                border: 1px solid var(--border-color);
                border-radius: var(--border-radius-sm);
                padding: 0.85rem 1rem;
                font-size: 0.9rem;
                background: rgba(255, 255, 255, 0.85);
                transition: var(--transition-base);
                box-shadow: var(--shadow-sm);
                width: 100%;
                color: var(--text-primary);
                font-weight: 400;
            }

            .ui-inputtext:focus,
            .ui-selectonemenu:focus,
            .ui-calendar:focus,
            .ui-inputtextarea:focus {
                outline: none;
                border-color: var(--gold-500);
                box-shadow: 0 0 0 3px var(--primary-light), var(--shadow-md), var(--neon-glow);
                background: white;
                transform: translateY(-2px);
            }

            .ui-inputtext:hover,
            .ui-selectonemenu:hover,
            .ui-calendar:hover,
            .ui-inputtextarea:hover {
                border-color: var(--gold-400);
                box-shadow: var(--shadow-sm), 0 0 0 1px rgba(253, 180, 20, 0.2);
            }

            /* Labels */
            .smat-label {
                font-weight: 600;
                color: var(--text-primary);
                font-size: 0.9rem;
                margin-bottom: 0.65rem;
                display: block;
                letter-spacing: 0.3px;
            }

            .smat-label.required:after {
                content: "*";
                color: var(--required-color);
                margin-left: 4px;
                font-size: 0.9em;
            }

            /* Premium Floating Labels */
            .floating-label {
                position: absolute;
                top: -10px;
                left: 12px;
                font-size: 0.75rem;
                background: linear-gradient(to bottom, #fffbf0, #fffdf8);
                padding: 0 8px;
                color: var(--gold-700);
                font-weight: 600;
                z-index: 1;
                border-radius: 12px;
                box-shadow: 0 0 0 1px white;
                transition: var(--transition-base);
                letter-spacing: 0.5px;
                border: 1px solid rgba(220, 200, 167, 0.3);
            }

            .floating-label.required:after {
                content: "*";
                color: var(--required-color);
                margin-left: 3px;
                font-size: 0.9em;
                position: relative;
                top: -1px;
            }

            /* Premium Button Styling with Golden Effects */
            .ui-button {
                border-radius: var(--border-radius-pill) !important;
                font-weight: 600 !important;
                letter-spacing: 0.5px;
                padding: 0.75rem 2rem !important;
                position: relative;
                overflow: hidden;
                transition: all 0.4s ease !important;
                box-shadow: var(--shadow-sm);
                border: none !important;
                font-size: 0.9rem;
                min-width: 130px;
                height: 46px;
                margin: 0.3rem;
                background-size: 200% auto !important;
                background-position: left center !important;
                display: inline-flex !important;
                align-items: center;
                justify-content: center;
                gap: 0.6rem;
                cursor: pointer;
                font-family: 'Poppins', sans-serif;
            }

            .ui-button .ui-button-text {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                position: relative;
                z-index: 1;
            }

            .ui-button .ui-icon {
                margin: 0 !important;
                font-size: 1.1rem !important;
                position: relative;
                z-index: 1;
            }

            .ui-button:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: inherit;
                opacity: 1;
                transition: var(--transition-base);
                z-index: 0;
            }

            .ui-button:after {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
                transition: left 0.7s ease;
                z-index: 1;
            }

            .ui-button:hover {
                transform: translateY(-4px) scale(1.03) !important;
                box-shadow: var(--shadow-lg), var(--neon-glow) !important;
            }

            .ui-button:hover:after {
                left: 100%;
            }

            .ui-button:active {
                transform: translateY(1px) scale(0.98) !important;
            }

            .ui-button-primary {
                background: var(--gradient-premium) !important;
                color: white !important;
            }

            .ui-button-primary:hover {
                box-shadow: 0 8px 20px rgba(253, 180, 20, 0.4) !important;
            }

            .ui-button-danger {
                background: linear-gradient(135deg, #d9776e 0%, #b75a52 100%) !important;
                color: white !important;
            }

            .ui-button-danger:hover {
                box-shadow: 0 8px 20px rgba(217, 119, 110, 0.4) !important;
            }

            .ui-button-warning {
                background: linear-gradient(135deg, #e6b450 0%, #d19d3a 100%) !important;
                color: white !important;
            }

            .ui-button-warning:hover {
                box-shadow: 0 8px 20px rgba(230, 180, 80, 0.4) !important;
            }

            .ui-button-success {
                background: linear-gradient(135deg, #a8c26a 0%, #8fa856 100%) !important;
                color: white !important;
            }

            .ui-button-success:hover {
                box-shadow: 0 8px 20px rgba(168, 194, 106, 0.4) !important;
            }

            .ui-button-help {
                background: linear-gradient(135deg, var(--gold-400) 0%, var(--gold-600) 100%) !important;
                color: white !important;
            }

            .ui-button-help:hover {
                box-shadow: 0 8px 20px rgba(254, 200, 75, 0.4) !important;
            }

            .ui-button-secondary {
                background: linear-gradient(135deg, #e8dfca 0%, #d4c9ad 100%) !important;
                color: var(--text-primary) !important;
                border: 1px solid rgba(220, 200, 167, 0.5) !important;
            }

            .ui-button-secondary:hover {
                box-shadow: 0 8px 20px rgba(232, 223, 202, 0.4) !important;
                background: linear-gradient(135deg, #e8dfca 0%, #d4c9ad 100%) !important;
            }

            .ui-tooltip {
                background: var(--surface-color) !important;
                backdrop-filter: blur(10px) !important;
                border: var(--glass-border) !important;
                box-shadow: var(--shadow-xl) !important;
                border-radius: var(--border-radius-md) !important;
                padding: 0.75rem 1rem !important;
                font-size: 0.85rem !important;
                border-top: 2px solid var(--gold-500);
            }

            /* Loading Spinner Animation */
            .ui-spinner .ui-spinner-input {
                padding-right: 2.8em !important;
            }

            .ui-spinner .ui-spinner-button {
                background: var(--gradient-premium) !important;
                color: white !important;
                width: 1.8em !important;
            }

            /* Premium Photo Upload Section */
            .photo-upload-section {
                background: var(--surface-color);
                border-radius: var(--border-radius-lg);
                padding: 2rem;
                margin-bottom: 2rem;
                box-shadow: var(--shadow-md);
                border-left: 3px solid var(--gold-400);
                position: relative;
                overflow: hidden;
            }

            .photo-upload-section:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--gradient-premium);
            }

            .photo-upload-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1.75rem;
                padding-bottom: 1rem;
                border-bottom: 1px solid rgba(220, 200, 167, 0.3);
            }

            .photo-upload-title {
                font-size: 1.4rem;
                font-weight: 700;
                color: var(--gold-800);
                margin: 0;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                font-family: 'Playfair Display', serif;
            }

            .photo-upload-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2.5rem;
                align-items: center;
            }

            .upload-controls {
                display: flex;
                flex-direction: column;
                gap: 1.25rem;
            }

            .photo-upload-info {
                font-size: 0.9rem;
                color: var(--text-secondary);
                margin: 0;
                display: flex;
                align-items: center;
                gap: 0.6rem;
                font-weight: 500;
            }

            .preview-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .preview-title {
                font-size: 1.1rem;
                font-weight: 700;
                color: var(--text-primary);
                margin: 0;
                text-transform: uppercase;
                letter-spacing: 1.2px;
                display: flex;
                align-items: center;
                gap: 0.6rem;
                font-family: 'Playfair Display', serif;
            }

            .photo-preview-container {
                position: relative;
                width: 200px;
                height: 200px;
                border-radius: var(--border-radius-md);
                overflow: hidden;
                box-shadow: var(--shadow-sm);
                border: 2px dashed var(--border-color);
                background: white;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: var(--transition-base);
            }

            .photo-preview-container:hover {
                border-color: var(--gold-500);
                transform: scale(1.05);
                box-shadow: var(--golden-glow), 0 8px 20px rgba(253, 180, 20, 0.25);
            }

            .photo-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 251, 240, 0.85);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                color: var(--text-secondary);
                gap: 0.75rem;
                z-index: 1;
            }

            .photo-overlay i {
                font-size: 3.5rem;
                color: var(--gold-400);
            }

            .photo-preview-image {
                width: 100%;
                height: 100%;
                object-fit: cover;
                position: relative;
                z-index: 2;
            }

            .preview-status {
                margin-top: 0.75rem;
            }

            /* Signature Area */
            .ui-signature {
                border: 2px dashed var(--border-color);
                border-radius: var(--border-radius-md);
                background: rgba(255, 255, 255, 0.85);
                transition: var(--transition-base);
                backdrop-filter: blur(6px);
                margin-top: 0.75rem;
            }

            .ui-signature:hover {
                border-color: var(--gold-500);
                box-shadow: var(--neon-glow);
            }

            /* Premium Divider */
            .ui-divider {
                margin: 2rem 0;
                border: none;
                height: 1px;
                background: linear-gradient(90deg, transparent, var(--gold-400), transparent);
                opacity: 0.5;
            }

            /* Premium Button Group */
            .button-group-actions {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                margin-top: 2.5rem;
                justify-content: flex-end;
                align-items: center;
                width: 100%;
                padding-top: 1.5rem;
                border-top: 1px solid rgba(220, 200, 167, 0.3);
            }

            .button-group-left {
                display: flex;
                gap: 1rem;
                order: 2;
            }

            .button-group-right {
                display: flex;
                gap: 1rem;
                order: 1;
            }

            /* Button Group Animation */
            .button-group-actions > div {
                position: relative;
                transition: transform 0.4s ease, opacity 0.4s ease;
                opacity: 0.95;
            }

            .button-group-actions > div:hover {
                transform: translateY(-3px);
                opacity: 1;
                z-index: 2;
            }

            /* Button Spacing and Hover Effects */
            .button-group-actions .ui-button {
                margin: 0 0.3rem;
                transition: all 0.4s ease, box-shadow 0.4s ease;
                position: relative;
            }

            .button-group-actions .ui-button:hover {
                z-index: 3;
                box-shadow: 0 8px 20px rgba(120, 63, 0, 0.2) !important;
            }

            /* Primary Button Enhancements */
            .button-group-actions .ui-button-primary {
                min-width: 150px;
                font-weight: 700 !important;
                letter-spacing: 0.8px;
            }

            /* Secondary Button Enhancements */
            .button-group-actions .ui-button-secondary {
                background: white !important;
                color: var(--text-primary) !important;
                border: 1px solid var(--border-color) !important;
            }

            .button-group-actions .ui-button-secondary:hover {
                background: var(--surface-hover) !important;
                border-color: var(--gold-400) !important;
            }

            /* Responsive Adjustments */
            @media (max-width: 768px) {
                .form-grid {
                    grid-template-columns: 1fr;
                }

                .form-col-2 {
                    grid-column: span 1;
                }

                .ui-button {
                    width: 100%;
                    margin-bottom: 0.75rem;
                }

                .photo-preview-container {
                    width: 160px;
                    height: 160px;
                }

                .button-group-actions {
                    flex-direction: column-reverse;
                    gap: 0.75rem;
                }

                .button-group-left,
                .button-group-right {
                    width: 100%;
                    justify-content: center;
                }

                .button-group-left {
                    order: 1;
                    margin-top: 1.25rem;
                }

                .button-group-right {
                    order: 2;
                    flex-wrap: wrap;
                }

                .button-group-right .ui-button,
                .button-group-left .ui-button {
                    width: 100%;
                }

                .photo-upload-content {
                    grid-template-columns: 1fr;
                }

                .card {
                    margin: 1.25rem 0;
                    padding: 1.5rem;
                    border-radius: var(--border-radius-md);
                }

                .form-title {
                    font-size: 1.6rem;
                }

                .field-group.required-field:before {
                    left: -12px;
                    top: 12px;
                    width: 7px;
                    height: 7px;
                }
            }

            /* Premium Status Dialog */
            .ui-dialog.glass-dialog {
                background: rgba(255, 253, 248, 0.95);
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
                border-radius: var(--border-radius-lg);
                border: var(--glass-border);
                box-shadow: var(--shadow-xl), var(--glass-shadow);
                border-top: 4px solid var(--gold-500);
            }

            /* Premium Viewer Dialog */
            .max-w-screen {
                max-width: 95vw !important;
                border-radius: var(--border-radius-lg) !important;
                overflow: hidden !important;
                border: var(--glass-border) !important;
                box-shadow: var(--shadow-xl), var(--glass-shadow) !important;
                backdrop-filter: blur(12px) !important;
                border-top: 4px solid var(--gold-500);
            }

            /* Additional fixes for PrimeFaces components */
            .ui-widget {
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
            }

            .ui-button-text-icon-left .ui-button-text {
                padding: 0.3em 0.6em 0.3em 2.2em !important;
            }

            .ui-button-text-icon-right .ui-button-text {
                padding: 0.3em 2.2em 0.3em 0.6em !important;
            }

            /* Premium File Upload Styling */
            .ui-fileupload-choose {
                background: var(--gradient-premium) !important;
                color: white !important;
                border-radius: var(--border-radius-pill) !important;
                padding: 0.75rem 1.75rem !important;
                border: none !important;
                height: 46px;
                font-weight: 600 !important;
                transition: var(--transition-base) !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 0.6rem !important;
                letter-spacing: 0.5px;
            }

            /* Premium Growl Notifications */
            .ui-growl {
                top: 25px !important;
                right: 25px !important;
            }

            .ui-growl-item-container {
                border-radius: var(--border-radius-md) !important;
                box-shadow: var(--shadow-xl) !important;
                backdrop-filter: blur(10px) !important;
                background: var(--surface-color) !important;
                border: var(--glass-border) !important;
                border-top: 3px solid var(--gold-500);
            }

            /* Input Error Styling */
            .ui-state-error {
                border-color: var(--error-color) !important;
                background: rgba(217, 119, 110, 0.08) !important;
            }

            .ui-message-error {
                color: var(--error-color) !important;
                font-size: 0.8rem !important;
                margin-top: 0.4rem !important;
                font-weight: 500;
            }

            /* Custom Scrollbar */
            ::-webkit-scrollbar {
                width: 10px;
                height: 10px;
            }

            ::-webkit-scrollbar-track {
                background: rgba(220, 200, 167, 0.1);
                border-radius: 10px;
            }

            ::-webkit-scrollbar-thumb {
                background: linear-gradient(to bottom, var(--gold-400), var(--gold-600));
                border-radius: 10px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(to bottom, var(--gold-500), var(--gold-700));
            }

            /* Premium File Uploader Styling */
            .modern-uploader .ui-fileupload-buttonbar {
                background: transparent !important;
                border: 2px dashed var(--border-color) !important;
                border-radius: var(--border-radius-md) !important;
                padding: 2rem !important;
                transition: var(--transition-base) !important;
                position: relative;
            }

            .modern-uploader .ui-fileupload-buttonbar:hover {
                border-color: var(--gold-500) !important;
                background: rgba(253, 180, 20, 0.08) !important;
                box-shadow: var(--neon-glow);
            }

            .modern-uploader .ui-fileupload-choose {
                background: var(--gradient-premium) !important;
                color: white !important;
                border-radius: var(--border-radius-pill) !important;
                padding: 0.75rem 1.75rem !important;
                border: none !important;
                height: 46px;
                font-weight: 600 !important;
                transition: var(--transition-base) !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 0.6rem !important;
            }

            .modern-uploader .ui-fileupload-content {
                border: none !important;
                padding: 0 !important;
                margin-top: 1.25rem !important;
            }

            .modern-uploader .ui-fileupload-row > div {
                display: flex !important;
                align-items: center !important;
                padding: 0.85rem !important;
                background: rgba(255, 255, 255, 0.9) !important;
                border-radius: var(--border-radius-sm) !important;
                margin-bottom: 0.6rem !important;
                border: 1px solid var(--border-color) !important;
                transition: var(--transition-base);
            }

            .modern-uploader .ui-fileupload-row > div:hover {
                background: var(--surface-hover) !important;
                transform: translateY(-3px);
                box-shadow: var(--shadow-sm) !important;
                border-color: var(--gold-300);
            }

            /* Drag and Drop Highlight */
            .modern-uploader .ui-fileupload-buttonbar.ui-state-highlight {
                border-color: var(--gold-500) !important;
                background: rgba(253, 180, 20, 0.15) !important;
                box-shadow: 0 0 0 3px var(--primary-light), var(--neon-glow) !important;
            }

            /* Default Avatar Image */
            .photo-preview-container img[src$="default-avatar.png"] {
                filter: sepia(0.3) opacity(0.8);
            }

            /* Section Titles */
            .section-title {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--gold-800);
                margin: 2rem 0 1.25rem;
                padding-bottom: 0.75rem;
                border-bottom: 1px solid rgba(220, 200, 167, 0.3);
                font-family: 'Playfair Display', serif;
                position: relative;
            }

            .section-title:after {
                content: "";
                position: absolute;
                bottom: -1px;
                left: 0;
                width: 60px;
                height: 2px;
                background: var(--gradient-gold);
                border-radius: 2px;
            }

            /* Approval Section Styling */
            .approval-section {
                border-top: 4px solid var(--gold-500);
                position: relative;
            }

            .approval-section:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--gradient-premium);
            }

            /* Badge Styling */
            .ui-badge {
                border-radius: 12px !important;
                font-weight: 600 !important;
                font-size: 0.75rem !important;
                padding: 0.35rem 0.75rem !important;
            }

            .badge-lg {
                font-size: 0.85rem !important;
                padding: 0.5rem 1rem !important;
            }
        </style>
    </ui:define>
    <ui:define name="section-content">
        <h:form id="form">
            <p:growl id="messages" showDetail="true" showSummary="false" sticky="true" life="5000" />

            <div class="card">
                <div class="form-header">
                    <h3 class="form-title">Employee Certification Form</h3>
                    <div class="form-badge">
                        <p:badge value="#{empCertificationBean.empCertification.certNumber}"
                                 severity="info" styleClass="badge-lg" />
                    </div>
                </div>

                <div class="form-grid">
                    <!-- Certificate Info -->
                    <div class="field-group required-field">
                        <span class="floating-label required">Certificate Number</span>
                        <p:inputText value="#{empCertificationBean.empCertification.certNumber}"
                                     disabled="true" styleClass="block" />
                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">TS Number</span>
                        <p:inputText value="#{empCertificationBean.empCertification.tsNumber}"
                                     disabled="true" styleClass="block" />
                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">Issue Date</span>
                        <p:calendar disabled="#{empCertificationBean.disabled}"
                                    value="#{empCertificationBean.empCertification.issueDate}"
                                    styleClass="block" pattern="dd-MM-yyyy"
                                    showTime="false">
                            <f:convertDateTime pattern="dd-MM-yyyy" timeZone="UTC" />
                        </p:calendar>

                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">Expiry Date</span>
                        <p:calendar value="#{empCertificationBean.empCertification.expiryDate}" pattern="dd-MM-yyyy" showTime="false">
                            <f:convertDateTime pattern="dd-MM-yyyy" timeZone="UTC" />
                        </p:calendar>
                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">Company</span>
                        <p:selectOneMenu
                                         style="width:100%;"
                                         value="#{empCertificationBean.company}"
                                         converter="omnifaces.SelectItemsIndexConverter">
                            <f:selectItem itemLabel="Select Company" itemValue="#{null}" />
                            <f:selectItems value="#{empCertificationBean.companies}"
                                           var="comp" itemLabel="#{comp.name}" itemValue="#{comp}" />
                        </p:selectOneMenu>
                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">Certification Type</span>
                        <p:selectOneMenu
                                         style="width:100%;"
                                         value="#{empCertificationBean.empCertificationType}"
                                         converter="omnifaces.SelectItemsIndexConverter">
                            <f:selectItems
                                    value="#{empCertificationBean.empCertificationTypes}"
                                    var="type" itemLabel="#{type.certName}" itemValue="#{type}" />
                        </p:selectOneMenu>
                    </div>
                </div>

                <!-- Employee Details -->
                <h4 class="section-title">Employee Information</h4>

                <div class="form-grid">
                    <div class="field-group required-field">
                        <span class="floating-label required">Fullname</span>
                        <p:inputText
                                     value="#{empCertificationBean.employee.fullName}"
                                     styleClass="block" />
                    </div>

                    <div class="field-group required-field">
                        <span class="floating-label required">Id number</span>
                        <p:inputText
                                     value="#{empCertificationBean.employee.idNumber}"
                                     styleClass="block" />
                    </div>


                    <div class="field-group required-field">
                        <span class="floating-label required">Date of birth</span>
                        <p:calendar value="#{empCertificationBean.employee.dateOfBirth}" pattern="dd-MM-yyyy" showTime="false">
                            <f:convertDateTime pattern="dd-MM-yyyy" timeZone="UTC" />
                        </p:calendar>
                    </div>
                </div>

                <!-- Employee Photo Section - Premium Version -->
                <div class="photo-upload-section">
                    <div class="photo-upload-header">
                        <h4 class="photo-upload-title">
                            <i class="pi pi-image" style="margin-right: 8px;"></i>
                            Employee Photo
                        </h4>
                        <p:badge value="#{not empty empCertificationBean.employee.employeePhoto ? 'Uploaded' : 'Pending'}"
                                 severity="#{not empty empCertificationBean.employee.employeePhoto ? 'success' : 'warning'}" />
                    </div>

                    <div class="photo-upload-content">
                        <!-- Upload Controls -->
                        <div class="upload-controls">
                            <p:fileUpload id="photoUpload"

                                          mode="advanced"
                                          dragDropSupport="true"
                                          label="Choose Photo"
                                          uploadLabel="Upload"
                                          ReturnLabel="Return"
                                          chooseIcon="pi pi-camera"
                                          uploadIcon="pi pi-cloud-upload"
                                          ReturnIcon="pi pi-times"
                                          sequential="true"
                                          allowTypes="/(\.|\/)(jpg|jpeg|png|gif|bmp|webp)$/"
                                          fileLimit="1"
                                          multiple="false"
                                          process="@([id$=photoUpload])"

                                          listener="#{empCertificationBean.handlePhotoUpload}"
                                          update="photoPreview messages"
                                          styleClass="modern-uploader" />

                        </div>

                        <!-- Photo Preview -->
                        <div class="preview-container">
                            <h5 class="preview-title">
                                <i class="pi pi-eye" style="margin-right: 8px;"></i>
                                PHOTO PREVIEW
                            </h5>

                            <p:outputPanel id="photoPreview" styleClass="photo-preview-container">
                                <p:graphicImage  stream="false"
                                                 value="#{not empty empCertificationBean.employee.employeePhoto ?
	                                        empCertificationBean.photoStreamedContent :
	                                        '/resources/images/default-avatar.png'}"
                                                 width="180"
                                                 height="180"
                                                 styleClass="photo-preview-image" />

                                <p:outputPanel rendered="#{empty empCertificationBean.employee.employeePhoto}" styleClass="photo-overlay">
                                    <i class="pi pi-user"></i>
                                    <span>No Photo</span>
                                </p:outputPanel>
                            </p:outputPanel>

                            <div class="preview-status">
                                <p:badge value="#{not empty empCertificationBean.employee.employeePhoto ? 'Ready' : 'Pending'}"
                                         severity="#{not empty empCertificationBean.employee.employeePhoto ? 'success' : 'warning'}" />
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    function updatePhotoPreview() {
                        // Refresh the photo preview by updating the timestamp parameter
                        var photoElement = document.querySelector('#photoPreview img');
                        if(photoElement) {
                            var src = photoElement.src.split('?')[0];
                            var newTimestamp = new Date().getTime();
                            photoElement.src = src + '?t=' + newTimestamp;

                            // Hide the overlay if image is loaded
                            var overlay = document.querySelector('.photo-overlay');
                            if(overlay) {
                                overlay.style.display = 'none';
                            }
                        }

                        // Update the badge status
                        if(PF('messages')) {
                            PF('messages').renderMessage({
                                summary: "Photo Updated",
                                detail: "Employee photo has been successfully updated.",
                                severity: 'info'
                            });
                        }
                    }
                </script>

                <div class="card approval-section">
                    <div class="form-header">
                        <h4 class="form-title">
                            <i class="pi pi-check-circle" style="margin-right: 8px;"></i>
                            Approval Process
                        </h4>
                    </div>

                    <div class="form-grid">
                        <!-- Reviewer Engineer Field -->
                        <div class="field-group required-field form-col-2">
                            <span class="floating-label required">Reviewer Engineer</span>
                            <p:selectOneMenu id="selectoneMenu_UserAliasRecpient"
                                             rendered="#{!empCertificationBean.disabled}"
                                             style="width:100%;"
                                             filter="true"
                                             filterMatchMode="contains"
                                             widgetVar="widgetVar_SelectOneMenu"
                                             converter="omnifaces.SelectItemsIndexConverter"
                                             value="#{empCertificationBean.selectedUserAliasRecipient}"
                                             required="true"
                                             requiredMessage="Please select a reviewer engineer">
                                <f:selectItem itemLabel="Select Reviewer Engineer" itemValue="#{null}" />
                                <f:selectItems
                                        itemLabel="(#{userAlias.userCode}) #{userAlias.sysUserBySysUser.displayName} / #{userAlias.organizationByOrganization.name} / #{userAlias.jobPosition.name}"
                                        itemValue="#{userAlias}"
                                        var="userAlias"
                                        value="#{empCertificationBean.userAliasRecipientList}" />

                            </p:selectOneMenu>
                            <p:message for="selectoneMenu_UserAliasRecpient" display="icon" />
                        </div>

                        <!-- Approval Comments Field -->
                        <div class="field-group required-field form-col-2">
                            <span class="floating-label required">Approval Comments</span>
                            <p:inputTextarea id="approvalComment"
                                             value="#{empCertificationBean.comment}"
                                             rows="3"
                                             styleClass="block"
                                             style="width:100%;"
                                             required="true"
                                             requiredMessage="Approval comments are required"
                                             placeholder="Enter your approval comments here..."/>
                            <p:message for="approvalComment" display="icon" />
                        </div>
                    </div>

                    <p:divider />

                    <div class="form-grid">
                        <!-- Inspection By Section -->
                        <div class="#{empCertificationBean.disabled ? 'field-group' : 'field-group form-col-2'}">
                            <h:outputLabel value="Inspection By"
                                           rendered="#{empCertificationBean.disabled}"
                                           styleClass="smat-label" />
                            <p:inputText disabled="true"
                                         rendered="#{empCertificationBean.disabled}"
                                         value="#{empCertificationBean.empCertification.sysUserByInspectedBy.displayName}"
                                         style="font-weight:600;color:var(--success-color);font-size: 1.1rem;" />

                        </div>

                        <!-- Reviewer Section -->
                        <div class="#{empCertificationBean.disabled ? 'field-group' : 'field-group form-col-2'}">
                            <h:outputLabel
                                    value="#{empCertificationBean.disabled ? interfaceLabel.reviewerEngineer : interfaceLabel.inspectionEngineer}"
                                    styleClass="smat-label" />
                            <p:inputText disabled="true"
                                         value="#{loginBean.user.displayName}"
                                         style="font-weight:600;color:var(--success-color);font-size: 1.1rem;" />
                        </div>
                    </div>

                    <!-- Action Buttons - Reordered for RTL -->
                    <div class="button-group-actions">
                        <!-- Right Side Group (now on left) -->
                        <div class="button-group-right">
                            <!-- Save/Approve Button -->
                            <div>
                                <p:commandButton id="commandButton_save"
                                                 value="#{empCertificationBean.disabled ? 'Approve' : 'Save'}"
                                                 icon="#{empCertificationBean.disabled ? 'pi pi-check-circle' : 'pi pi-save'}"
                                                 pt:data-tooltip="#{empCertificationBean.disabled ? 'Approve' : 'Save'}"
                                                 process="@form"
                                                 action="#{empCertificationBean.doSave}"
                                                 update="@form"
                                                 disabled="#{empCertificationBean.step eq '03'}"
                                                 styleClass="ui-button-primary">
                                </p:commandButton>
                            </div>

                            <!-- Print Button -->
                            <div style="#{empCertificationBean.step eq '03' ? 'display:block;' : 'display:none;'}">
                                <p:commandButton id="commandButton_print"
                                                 action="#{empCertificationBean.doPrint()}"
                                                 value="Print"
                                                 icon="pi pi-print"
                                                 pt:data-tooltip="Print"
                                                 onclick="windows.open('_blank')"
                                                 styleClass="ui-button-help">
                                </p:commandButton>
                            </div>

                            <!-- Return Button -->

                            <p:button id="commandButton_return_main"
                                      value="Return"
                                      icon="pi pi-arrow-left"
                                      pt:data-tooltip="Return"
                                      styleClass="ui-button-secondary"
                                      outcome="pretty:inspection/my-tasks" />

                        </div>

                        <!-- Left Side Group (now on right) -->
                        <div class="button-group-left">
                            <!-- Return to Issuer Button -->
                            <div style="#{empCertificationBean.disabled and empCertificationBean.step ne '03' ? 'display:block;' : 'display:none;'}">
                                <p:commandButton id="commandButton_return"
                                                 value="Return to Inspector"
                                                 icon="pi pi-undo"
                                                 pt:data-tooltip="Return to Inspector"
                                                 process="@form"
                                                 update="@([id$=messages])"
                                                 action="#{empCertificationBean.returnToIssuer}"
                                                 styleClass="ui-button-warning">
                                </p:commandButton>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>

    <ui:define name="section-dialogs">
        <p:dialog modal="true" widgetVar="statusDialog"
                  header="#{interfaceLabel.processing}" draggable="false"
                  closable="false" resizable="false" styleClass="glass-dialog">
            <div style="text-align: center; padding: 2.5rem;">
                <i class="pi pi-spinner pi-spin" style="font-size: 3.5rem; color: var(--gold-500);"></i>
                <p style="margin-top: 1.75rem; color: var(--text-primary); font-weight: 600; font-size: 1.1rem;">Processing your request...</p>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">Please wait while we complete your action</p>
            </div>
        </p:dialog>
        <p:dialog header="#{interfaceLabel.viewer}" showEffect="fade"
                  widgetVar="viewerWidgetVar" closable="true" blockScroll="true"
                  dynamic="true" cache="true" fitViewport="true" showHeader="true"
                  contentWidth="100%" contentHeight="100%" resizeObserver="true"
                  resizeObserverCenter="true" styleClass="max-w-screen"
                  iframeStyleClass="max-w-screen" responsive="true" width="92%"
                  height="100%" maximizable="true" minimizable="true">
            <h:form id="form_viewer">
                <p:outputPanel id="manage-viewer-content" class="ui-fluid"
                               layout="inline" style="width:100%;height:100%">
                    <p:scrollPanel
                            style="border:1px solid var(--border-color);width: auto; height:100%"
                            styleClass="" mode="native">
                        <pe:documentViewer id="documentViewer_pdf" height="550"
                                           zoom="page-width" rendered="true"
                                           value="#{certificateViewerBean.file}"></pe:documentViewer>
                    </p:scrollPanel>
                </p:outputPanel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>