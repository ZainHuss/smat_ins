<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">
	<ui:define name="section-head">
       #{interfaceLabel.organizations}
	</ui:define>
	<ui:define name="head">
		<h:outputStylesheet library="#{appSetting.resourceLib}"
			name="css/material-theme.css"></h:outputStylesheet>
		<h:outputScript library="#{appSetting.resourceLib}"
			name="script/primefaces-rtl-tree.js"></h:outputScript>
		<script type="text/javascript">
		   $( document ).ready(function() {
			   
			  
			
			});
	    </script>
	</ui:define>
	<ui:define name="section-content">
		<h:form id="form_organizations">
		    <style type="text/css" >
		     .block-rtl{
		       margin-right:58px;
		       margin-top:16px;
		     }
		     .block-ltr{
		       margin-left:14px;
		       margin-top:16px;
		     }
		    </style>
			<p:growl id="messages" showDetail="true" />

			<p:panelGrid id="panelGrid_prime" columns="2" layout="grid"
				columnClasses="ui-g-12 ui-md-6 ui-lg-5, ui-g-12 ui-md-6 ui-lg-7"
				contentStyleClass="align-items-baseline ui-fluid"
				style="border:0px none; background-color:transparent;">
				<p:panel id="panel_tree_organization">
					<h:outputText value="#{interfaceLabel.search}"
						style="color:green;font-weight:bolder;font-style:italic;" />
					<p:divider type="dashed"></p:divider>
					<p:panelGrid columns="1" layout="grid"
						columnClasses="ui-g-12 ui-md-12 ui-lg-12"
						contentStyleClass="align-items-baseline ui-fluid"
						style="border:0px none; background-color:transparent;">
						<p:inputText placeholder="#{interfaceLabel.name}"
							value="#{organizationBean.organizationName}">
						</p:inputText>

						<p:inputText placeholder="#{interfaceLabel.code}"
							value="#{organizationBean.organizationCode}">
						</p:inputText>

						<p:panelGrid columns="2" layout="grid"
							columnClasses="ui-g-12 ui-md-12 ui-lg-6, ui-g-12 ui-md-12 ui-lg-6"
							contentStyleClass="align-items-baseline ui-fluid"
							style="border:0px none; background-color:transparent;">
							<p:commandButton value="#{interfaceLabel.search}"
								action="#{organizationBean.searchTree()}" icon="pi pi-search"
								ajax="true"
								styleClass="ui-button-raised ui-button-success ui-button-flat"
								update="@form"></p:commandButton>
							<p:commandButton value="#{interfaceLabel.addOrganization}"
								action="#{organizationBean.add()}" icon="pi pi-plus" ajax="true"
								styleClass="ui-button-raised ui-button-danger ui-button-flat"
								update="@([id$=panel_selectedOrganization])">
							</p:commandButton>
						</p:panelGrid>
					</p:panelGrid>

					<p:divider type="dashed"></p:divider>
					<p:tree id="tree_organizations" value="#{organizationBean.root}"
						highlight="true" animate="true" selectionMode="single"
						selection="#{organizationBean.selectedNode}"
						widgetVar="treeWidgetVar" var="node" cache="false" dynamic="true">
						<p:ajax event="expand" listener="#{organizationBean.onNodeExpand}"
							oncomplete="reverseTreeChildExpandedIcon();" />
						<p:ajax event="collapse"
							listener="#{organizationBean.onNodeCollapse}" />
						<p:ajax event="select" listener="#{organizationBean.onNodeSelect}"
							update="@([id$=panel_selectedOrganization])" delay="100" />
						<p:treeNode icon="pi pi-home">
							<span> <span
								style="color: black !important; font-weight: bolder !important;">(#{node.code})</span>
								#{node.name}
							</span>
							<p:spacer width="6px"></p:spacer>
							<p:commandButton icon="pi pi-plus" ajax="true"
								styleClass="rounded-button ui-button-help ui-button-flat"
								process="@this" action="#{organizationBean.startAction('add')}"
								update="@([id$=panelGrid_addOrganizationDetails])"></p:commandButton>

							<p:spacer width="6px"></p:spacer>
							<p:commandButton icon="pi pi-pencil" ajax="true"
								styleClass="rounded-button ui-button-success ui-button-flat"
								process="@this" action="#{organizationBean.startAction('edit')}"
								update="@([id$=panel_selectedOrganization])"></p:commandButton>

							<p:spacer width="6px"></p:spacer>
							<p:commandButton icon="pi pi-trash" ajax="true"
								styleClass="rounded-button ui-button-danger ui-button-flat"
								action="#{organizationBean.delete()}"
								update="@([id$=panel_tree_organization],[id$=tree_organizations],[id$=messages],[id$=panel_selectedOrganization])">
								<p:confirm header="#{interfaceLabel.confirmation}"
									message="#{interfaceLabel.confirmTheDelete}"
									icon="pi pi-exclamation-triangle" />
							</p:commandButton>
						</p:treeNode>
					</p:tree>
					

				</p:panel>
				<p:panel id="panel_selectedOrganization"
					header="#{organizationBean.selectedOrganization == null ? interfaceLabel.noOutOrganizationParent : '('.concat(organizationBean.selectedOrganization.code).concat(')').concat(' ').concat(organizationBean.selectedOrganization.arabicName)}">
					<ui:include src="#{organizationBean.template}" />
				</p:panel>
			</p:panelGrid>
			<p:confirmDialog global="true" showEffect="fade" width="300">
				<p:commandButton value="#{interfaceLabel.yes}" type="button"
					styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
				<p:commandButton value="#{interfaceLabel.no}" type="button"
					styleClass="ui-confirmdialog-no ui-button-secondary"
					icon="pi pi-times" />
			</p:confirmDialog>

		</h:form>


	</ui:define>
</ui:composition>